---
- hosts: localhost
  tasks:
  - name: Login in SMC API using KEY
    uri:
      url: http://172.26.20.245:8082/6.6/login
      method: POST
      body_format: json
      body: {"authenticationkey":"USGTRqjDud8sbfzgJv3VyhsK"}
      return_content: yes
      status_code: 200
    register: cookies_string

  - name: Put Firewall Online
    uri:
      url: http://172.26.20.245:8082/6.6/elements/single_fw/683/firewall_node/684/go_online
      method: PUT
      headers:
       Cookie: "{{ cookies_string.set_cookie }}"
      return_content: yes
    register: online
